<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Planilla Nutricional Mejorada (Versión 2.0) - Compacta</title>
    <style>
        /* --- Global Compact Styles --- */
        body {
            font-family: Arial, sans-serif;
            line-height: 1.2; /* Reduced line height */
            margin: 10mm; /* Reduced margins for A4 */
            font-size: 9pt; /* Reduced base font size */
            color: #333;
        }

        h1, h2, h3 {
            margin-top: 0.6em; /* Reduced top margin */
            margin-bottom: 0.3em; /* Reduced bottom margin */
        }

        h1 {
            text-align: center;
            font-size: 1.3em; /* Slightly smaller */
            margin-bottom: 0.5em;
        }

        h2 {
            font-size: 1.1em; /* Smaller */
            border-bottom: 1px solid #ccc;
            padding-bottom: 0.1em; /* Reduced padding */
        }

        h3 {
            font-size: 1.0em; /* Smaller */
            margin-top: 0.5em;
            margin-bottom: 0.2em;
        }

        section {
            margin-bottom: 0.8em; /* Reduced section spacing */
        }

        label {
            display: inline-block;
            margin-right: 5px; /* Reduced spacing */
            vertical-align: middle;
        }

        input[type="text"],
        input[type="number"] {
            border: none;
            border-bottom: 1px solid #666; /* Slightly darker for visibility */
            padding: 1px 3px; /* Reduced padding */
            margin-left: 3px; /* Reduced margin */
            margin-right: 5px;
            font-size: 9pt; /* Match body font size */
            min-width: 40px; /* Smaller min width */
        }

        input[type="text"].long-input { width: 60%; }
        input[type="text"].medium-input { width: 40%; }
        input[type="text"].short-input { width: 45px; }


        textarea {
            width: 100%;
            height: 60px; /* Reduced height */
            border: 1px solid #888;
            margin-top: 3px;
            padding: 3px;
            box-sizing: border-box;
            font-size: 9pt;
        }

        .form-group {
            margin-bottom: 4px; /* Reduced spacing */
            display: flex;
            flex-wrap: wrap;
            align-items: center;
        }

        .form-group > label:first-child {
             min-width: auto; /* Let label size naturally */
             margin-right: 3px;
        }

        .checkbox-group {
            display: flex;
            flex-wrap: wrap;
            gap: 2px 10px; /* Reduced gap */
            margin-bottom: 5px; /* Reduced spacing */
        }

        .checkbox-item {
            display: flex;
            align-items: center;
            margin-bottom: 3px; /* Reduced spacing */
            min-width: 150px; /* Adjust as needed */
            flex-grow: 1;
        }

        .checkbox-item input[type="checkbox"],
        .checkbox-item input[type="radio"] {
            opacity: 0;
            position: absolute;
            width: 0;
            height: 0;
        }

        .checkbox-item label {
            position: relative;
            padding-left: 22px; /* Space for slightly smaller box */
            cursor: pointer;
            user-select: none;
            display: inline-flex;
            align-items: center;
            min-height: 18px; /* Match smaller box */
            margin-right: 0;
        }

        /* Custom checkbox/radio box */
        .checkbox-item label::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 16px;  /* Slightly smaller checkbox width */
            height: 16px; /* Slightly smaller checkbox height */
            border: 1px solid #444; /* Darker border */
            background-color: #fff;
            box-sizing: border-box;
        }
        /* Style radio buttons */
         input[type="radio"] + label::before {
            border-radius: 50%; /* Make radio buttons round */
        }


        .inline-group label, .inline-group input, .inline-group .checkbox-item {
            margin-right: 5px; /* Reduced spacing for inline elements */
        }
        .inline-group .checkbox-item {
             min-width: auto; /* Allow inline checkboxes to take minimum space */
             margin-bottom: 0; /* Remove bottom margin for inline items */
             flex-grow: 0; /* Don't let them grow excessively */
        }


        .section-note {
            font-style: italic;
            color: #555;
            font-size: 8pt; /* Smaller note font */
            margin-bottom: 4px;
            display: block;
        }

        .category-title {
            font-weight: bold;
            font-size: 9pt; /* Match body font size */
            margin-top: 8px; /* Reduced spacing */
            margin-bottom: 3px;
            display: block;
        }

        .other-input-group {
            display: flex;
            align-items: center;
            flex-wrap: nowrap; /* Try to keep on one line */
            gap: 3px;
        }
        .other-input-group .checkbox-item {
            min-width: auto;
            flex-grow: 0; /* Don't let checkbox label grow */
            margin-bottom: 0;
        }
        .other-input-group input[type="text"]{
            flex-grow: 1;
            min-width: 150px;
        }

        /* --- Print Specific Styles --- */
        @media print {
            body {
                margin: 10mm; /* Ensure print margins */
                font-size: 9pt; /* Ensure print font size */
            }
            input[type="text"], input[type="number"], textarea {
                border-color: #000;
            }
            .checkbox-item label::before {
                border: 1.5px solid #000; /* Thicker border for print */
            }
            /* Attempt to prevent breaks */
             section, .form-group, .checkbox-group, .checkbox-item, h2, h3 {
                 page-break-inside: avoid;
            }
        }

    </style>
</head>
<body>

    <h1>Planilla Nutricional Mejorada (Versión 2.0)</h1>

    <section>
        <h2>1. Datos Básicos</h2>
        <!-- <span class="section-note">(Sin cambios, pero con más espacio para escribir)</span> -->
        <div class="form-group">
            <label for="nombre">Nombre:</label>
            <input type="text" id="nombre" name="nombre" class="long-input" style="width: 75%;">
        </div>
        <div class="form-group inline-group">
            <label for="edad">Edad:</label>
            <input type="number" id="edad" name="edad" class="short-input"> años
            <span style="margin-left: 10px;">Sexo:</span>
            <div class="checkbox-item">
                <input type="radio" id="sexo_h" name="sexo" value="Hombre"><label for="sexo_h">Hombre</label>
            </div>
            <div class="checkbox-item">
                <input type="radio" id="sexo_m" name="sexo" value="Mujer"><label for="sexo_m">Mujer</label>
            </div>
             <div class="checkbox-item">
                <input type="radio" id="sexo_o" name="sexo" value="Otro"><label for="sexo_o">Otro</label>
            </div>
        </div>
        <div class="form-group inline-group">
            <label for="peso">Peso:</label>
            <input type="number" id="peso" name="peso" step="0.1" class="short-input"> kg |
            <label for="talla" style="margin-left: 5px;">Talla:</label>
            <input type="number" id="talla" name="talla" class="short-input"> cm |
            <label for="imc" style="margin-left: 5px;">IMC:</label>
            <input type="number" id="imc" name="imc" step="0.1" class="short-input"> (opc)
        </div>
    </section>

    <section>
        <h2>2. Antecedentes Patológicos y Alergias/Intolerancias</h2>
        <!-- <span class="section-note">(Ahora con más opciones y espacio para alergias)</span> -->

        <h3>Antecedentes Patológicos:</h3>
        <div class="checkbox-group">
            <div class="checkbox-item"><input type="checkbox" id="diabetes" name="patologia_diabetes"><label for="diabetes">Diabetes</label></div>
            <div class="checkbox-item"><input type="checkbox" id="hipertension" name="patologia_hipertension"><label for="hipertension">Hipertensión</label></div>
            <div class="checkbox-item"><input type="checkbox" id="dislipidemia" name="patologia_dislipidemia"><label for="dislipidemia">Dislipidemia</label></div>
            <div class="checkbox-item"><input type="checkbox" id="obesidad" name="patologia_obesidad"><label for="obesidad">Obesidad</label></div>
            <div class="checkbox-item"><input type="checkbox" id="renal" name="patologia_renal"><label for="renal">Enf. renal</label></div>
            <div class="checkbox-item"><input type="checkbox" id="cardiopatia" name="patologia_cardiopatia"><label for="cardiopatia">Cardiopatía</label></div>
            <div class="checkbox-item"><input type="checkbox" id="celiaquia" name="patologia_celiaquia"><label for="celiaquia">Celiaquía</label></div>
            <div class="checkbox-item"><input type="checkbox" id="higado_graso" name="patologia_higado_graso"><label for="higado_graso">Hígado graso</label></div>
        </div>

        <h3>Alergias e Intolerancias Alimentarias <span class="section-note" style="display:inline;">(Marque todas las que apliquen)</span></h3>

        <span class="category-title">Alergias (inmun.):</span>
        <div class="checkbox-group">
            <div class="checkbox-item"><input type="checkbox" id="alergia_lacteos" name="alergia_lacteos"><label for="alergia_lacteos">Lácteos (Leche, queso, yogur)</label></div>
            <div class="checkbox-item"><input type="checkbox" id="alergia_huevo" name="alergia_huevo"><label for="alergia_huevo">Huevo</label></div>
            <div class="checkbox-item"><input type="checkbox" id="alergia_pescado" name="alergia_pescado"><label for="alergia_pescado">Pescado/mariscos</label></div>
            <div class="checkbox-item"><input type="checkbox" id="alergia_frutos_secos" name="alergia_frutos_secos"><label for="alergia_frutos_secos">Maní/frutos secos (nueces, etc)</label></div>
            <div class="checkbox-item"><input type="checkbox" id="alergia_trigo" name="alergia_trigo"><label for="alergia_trigo">Trigo (gluten o alergia esp.)</label></div>
            <div class="checkbox-item"><input type="checkbox" id="alergia_soja" name="alergia_soja"><label for="alergia_soja">Soja</label></div>
             <div class="checkbox-item other-input-group" style="min-width: 90%; margin-top: 2px;">
                <input type="checkbox" id="alergia_otros_check" name="alergia_otros_check"><label for="alergia_otros_check">Otros:</label>
                <input type="text" id="alergia_otros_text" name="alergia_otros_text" class="medium-input">
            </div>
        </div>

        <span class="category-title">Intolerancias (digest.):</span>
        <div class="checkbox-group">
            <div class="checkbox-item"><input type="checkbox" id="intol_lactosa" name="intol_lactosa"><label for="intol_lactosa">Lactosa</label></div>
            <div class="checkbox-item"><input type="checkbox" id="intol_gluten" name="intol_gluten"><label for="intol_gluten">Gluten (no celíaco)</label></div>
            <div class="checkbox-item"><input type="checkbox" id="intol_fodmaps" name="intol_fodmaps"><label for="intol_fodmaps">FODMAPs (ajo, cebolla, etc)</label></div>
             <div class="checkbox-item other-input-group" style="min-width: 90%; margin-top: 2px;">
                <input type="checkbox" id="intol_otros_check" name="intol_otros_check"><label for="intol_otros_check">Otros:</label>
                <input type="text" id="intol_otros_text" name="intol_otros_text" class="medium-input">
            </div>
        </div>

        <span class="category-title">Reacciones graves (anafilaxia):</span>
         <div class="checkbox-group" style="gap: 5px;"> <!-- Tighter gap here -->
            <div class="checkbox-item" style="min-width: 60%;">
                 <input type="checkbox" id="anafilaxia_previa" name="anafilaxia_previa"><label for="anafilaxia_previa">Episodio previo anafilaxia (req. adrenalina)</label>
            </div>
            <div class="form-group" style="width: 100%; margin-bottom: 2px;">
                <label for="anafilaxia_causa">Alim. causante:</label>
                <input type="text" id="anafilaxia_causa" name="anafilaxia_causa" class="medium-input" style="width: 50%;">
            </div>
             <div class="checkbox-item other-input-group" style="min-width: 90%; margin-top: 0;">
                <input type="checkbox" id="anafilaxia_otros_check" name="anafilaxia_otros_check"><label for="anafilaxia_otros_check">Otras reac. graves:</label>
                <input type="text" id="anafilaxia_otros_text" name="anafilaxia_otros_text" class="medium-input">
            </div>
        </div>
    </section>

    <section>
        <h2>3. Medicación Habitual</h2>
        <!-- <span class="section-note">(Lista ampliada y organizada por categorías)</span> -->

        <h3>Hipertensión/Corazón:</h3>
        <div class="checkbox-group">
            <div class="checkbox-item"><input type="checkbox" id="med_enalapril" name="med_enalapril"><label for="med_enalapril">Enalapril</label></div>
            <div class="checkbox-item"><input type="checkbox" id="med_carvedilol" name="med_carvedilol"><label for="med_carvedilol">Carvedilol</label></div>
            <div class="checkbox-item"><input type="checkbox" id="med_atenolol" name="med_atenolol"><label for="med_atenolol">Atenolol</label></div>
            <div class="checkbox-item"><input type="checkbox" id="med_losartan" name="med_losartan"><label for="med_losartan">Losartan</label></div>
            <div class="checkbox-item"><input type="checkbox" id="med_furosemida" name="med_furosemida"><label for="med_furosemida">Furosemida</label></div>
            <div class="checkbox-item"><input type="checkbox" id="med_hidrocloro" name="med_hidrocloro"><label for="med_hidrocloro">Hidroclorotiazida</label></div>
            <div class="checkbox-item"><input type="checkbox" id="med_espirono" name="med_espirono"><label for="med_espirono">Espironolactona</label></div>
        </div>

        <h3>Diabetes:</h3>
        <div class="checkbox-group">
            <div class="checkbox-item"><input type="checkbox" id="med_metformina" name="med_metformina"><label for="med_metformina">Metformina</label></div>
            <div class="checkbox-item"><input type="checkbox" id="med_ins_nph" name="med_ins_nph"><label for="med_ins_nph">Insulina NPH</label></div>
            <div class="checkbox-item"><input type="checkbox" id="med_ins_corr" name="med_ins_corr"><label for="med_ins_corr">Ins. Corriente</label></div>
            <div class="checkbox-item"><input type="checkbox" id="med_ins_glarg" name="med_ins_glarg"><label for="med_ins_glarg">Ins. Glargina</label></div>
            <div class="checkbox-item"><input type="checkbox" id="med_ins_aspart" name="med_ins_aspart"><label for="med_ins_aspart">Ins. Aspártica</label></div>
        </div>

        <h3>Colesterol:</h3>
        <div class="checkbox-group">
            <div class="checkbox-item"><input type="checkbox" id="med_atorva" name="med_atorva"><label for="med_atorva">Atorvastatina</label></div>
            <div class="checkbox-item"><input type="checkbox" id="med_simva" name="med_simva"><label for="med_simva">Simvastatina</label></div>
        </div>

        <h3>Otros Comunes:</h3>
         <div class="checkbox-group">
            <div class="checkbox-item"><input type="checkbox" id="med_aspirina" name="med_aspirina"><label for="med_aspirina">Aspirina</label></div>
            <div class="checkbox-item"><input type="checkbox" id="med_tamsu" name="med_tamsu"><label for="med_tamsu">Tamsulosina</label></div>
            <div class="checkbox-item"><input type="checkbox" id="med_terazo" name="med_terazo"><label for="med_terazo">Terazosina</label></div>
            <div class="checkbox-item"><input type="checkbox" id="med_omepra" name="med_omepra"><label for="med_omepra">Omeprazol</label></div>
         </div>
         <div class="checkbox-item other-input-group" style="min-width: 90%;">
            <input type="checkbox" id="med_otros_check" name="med_otros_check"><label for="med_otros_check">Otros Meds:</label>
            <input type="text" id="med_otros_text" name="med_otros_text" class="long-input" style="width: 65%;">
        </div>
    </section>

    <section>
        <h2>4. Hábitos Alimentarios Detallados</h2>
        <!-- <span class="section-note">(Nuevas secciones)</span> -->

        <h3>Frecuencia de consumo semanal:</h3>

        <span class="category-title">Fibra:</span>
        <div class="checkbox-group">
            <div class="checkbox-item"><input type="checkbox" id="fibra_verduras" name="fibra_verduras"><label for="fibra_verduras">Verduras (≥5 v/sem)</label></div>
            <div class="checkbox-item"><input type="checkbox" id="fibra_frutas" name="fibra_frutas"><label for="fibra_frutas">Frutas (≥4 v/sem)</label></div>
            <div class="checkbox-item"><input type="checkbox" id="fibra_legumbres" name="fibra_legumbres"><label for="fibra_legumbres">Legumbres (≥2 v/sem)</label></div>
            <div class="checkbox-item"><input type="checkbox" id="fibra_cereales" name="fibra_cereales"><label for="fibra_cereales">Cereales integrales</label></div>
            <div class="checkbox-item" style="min-width: 100%; margin-top: 2px;"><input type="checkbox" id="fibra_baja" name="fibra_baja"><label for="fibra_baja"><b>Bajo consumo de fibra</b> (marca si pocos de los anteriores)</label></div>
        </div>

        <span class="category-title">Ultraprocesados:</span>
        <div class="checkbox-group">
            <div class="checkbox-item"><input type="checkbox" id="ultra_snacks" name="ultra_snacks"><label for="ultra_snacks">Snacks (papas fritas, galletas)</label></div>
            <div class="checkbox-item"><input type="checkbox" id="ultra_embutidos" name="ultra_embutidos"><label for="ultra_embutidos">Embutidos (salchichas, fiambres)</label></div>
            <div class="checkbox-item"><input type="checkbox" id="ultra_bebidas" name="ultra_bebidas"><label for="ultra_bebidas">Bebidas azucaradas</label></div>
            <div class="checkbox-item"><input type="checkbox" id="ultra_rapidas" name="ultra_rapidas"><label for="ultra_rapidas">Comidas rápidas (pizza, etc)</label></div>
             <div class="checkbox-item" style="min-width: 100%; margin-top: 2px;"><input type="checkbox" id="ultra_diario" name="ultra_diario"><label for="ultra_diario"><b>Consumo diario</b> de alguno de estos</label></div>
        </div>

        <h3>Agua:</h3>
        <div class="checkbox-group inline-group">
            <div class="checkbox-item"><input type="radio" id="agua_menos1" name="agua_consumo" value="<1L"><label for="agua_menos1"><1L/día</label></div>
            <div class="checkbox-item"><input type="radio" id="agua_1a2" name="agua_consumo" value="1-2L"><label for="agua_1a2">1-2L</label></div>
            <div class="checkbox-item"><input type="radio" id="agua_mas2" name="agua_consumo" value=">2L"><label for="agua_mas2">>2L</label></div>
        </div>
    </section>

    <section>
        <h2>5. Síntomas/Dificultades</h2>
         <!-- <span class="section-note">(Ampliado)</span> -->
        <div class="checkbox-group">
            <div class="checkbox-item"><input type="checkbox" id="sint_masticar" name="sint_masticar"><label for="sint_masticar">Dificultad masticar/tragar</label></div>
            <div class="checkbox-item"><input type="checkbox" id="sint_acidez" name="sint_acidez"><label for="sint_acidez">Acidez/reflujo</label></div>
            <div class="checkbox-item"><input type="checkbox" id="sint_hinchazon" name="sint_hinchazon"><label for="sint_hinchazon">Hinchazón post-comida</label></div>
            <div class="checkbox-item"><input type="checkbox" id="sint_estrenimiento" name="sint_estrenimiento"><label for="sint_estrenimiento">Estreñimiento (<3/sem)</label></div>
            <div class="checkbox-item"><input type="checkbox" id="sint_diarrea" name="sint_diarrea"><label for="sint_diarrea">Diarrea frecuente</label></div>
            <div class="checkbox-item"><input type="checkbox" id="sint_perdida_peso" name="sint_perdida_peso"><label for="sint_perdida_peso">Pérdida peso no intenc.</label></div>
            <div class="checkbox-item"><input type="checkbox" id="sint_fatiga" name="sint_fatiga"><label for="sint_fatiga">Fatiga constante</label></div>
        </div>
    </section>

    <section>
        <h2>6. Observaciones</h2>
        <textarea id="observaciones" name="observaciones" rows="3"></textarea> <!-- Reduced rows further -->
    </section>

</body>
</html>